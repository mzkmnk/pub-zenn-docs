---
title: "Angular v20におけるテスト周りの変更点"
emoji: "🦁"
type: "tech"
topics: ["Angular","Tech","Test"]
published: false
---

Angular@v20が2025年5月29日に予定されているので、今回はTestBed周りを見ていこうと思います。

## `TestBed.flushEffects()`の削除
https://github.com/angular/angular/commit/d5fd7349fb8b3942f0727cd7ee62e7a7b231e9e4
テストの中で`effect`を実行させるために使われていたこの関数ですが削除され、`TestBed.tick()`の使用を推奨するようになりました。

### 背景

before
```ts
import {TestBed} from "@angular/core/testing";

TestBed.flushEffects();
```

after(@v20)
```ts
import {TestBed} from "@angular/core/testing";

TestBed.tick();
```

## `TestBed.get()`の削除
https://github.com/angular/angular/commit/5e209cb560fdfb943169a09d35389c703fa71418
テスト環境内のサービスなどの依存関係を取得するためのものでしたが、angular@v9で非推奨になっていました。
今回のv20へのアップデートで削除されるようです。

before
```ts
import {TestBed} from "@angular/core/testing";

Testbed.get(...);
```

after(@v20)
```ts
import {TestBed} from "@angular/core/testing";

Testbed.inject(...);
```